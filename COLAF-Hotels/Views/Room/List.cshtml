@model IEnumerable<COLAFHotel.Models.Room>
@{
    ViewBag.Title = "Rooms";
}

<div class="max-w-6xl mx-auto p-6 bg-[#F5E6DA] rounded-lg shadow-lg border border-[#9C6F47] pt-20">
    <h2 class="text-[#5C3D2E] text-4xl font-semibold mb-6 text-center tracking-wide">Discover Our Rooms</h2>

    <!-- Filters -->
    <div class="flex flex-col sm:flex-row gap-4 mb-8">
        <!-- Floor Filter -->
        <div class="flex items-center bg-[#9C6F47] text-white px-3 py-2 rounded-lg w-full sm:w-1/3">
            <svg class="w-5 h-5 text-[#F5E6DA] mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
            </svg>
            <select id="floorFilter" class="bg-[#9C6F47] text-white w-full outline-none" onchange="filterRooms()">
                <option value="">All Floors</option>
                @foreach (var floor in Model.Select(r => r.RoomNumber.ToString().Substring(0, 1)).Distinct())
                {
                    <option value="@floor">Floor @floor</option>
                }
            </select>
        </div>

        <!-- Category Filter -->
        <div class="flex items-center bg-[#9C6F47] text-white px-3 py-2 rounded-lg w-full sm:w-1/3">
            <svg class="w-5 h-5 text-[#F5E6DA] mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m-4 4V4m8 4V4m-6 14h6a2 2 0 002-2v-6m-8 8h-6a2 2 0 01-2-2v-6"></path>
            </svg>
            <select id="categoryFilter" class="bg-[#9C6F47] text-white w-full outline-none" onchange="filterRooms()">
                <option value="">All Categories</option>
                @foreach (var category in Model.Select(r => r.Category).Distinct())
                {
                    <option value="@category">@category</option>
                }
            </select>
        </div>
    </div>

    <!-- Room Cards -->
    <div id="room-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        @foreach (var room in Model)
        {
            <div class="room-card bg-[#EDE0D4] shadow-lg rounded-xl border border-[#9C6F47] p-6 flex flex-col sm:flex-row w-full transition-all duration-300 hover:shadow-xl"
                 data-floor="@room.RoomNumber.ToString().Substring(0, 1)"
                 data-category="@room.Category">
                <img src="@Url.Content(@room.ImageUrl)" alt="Room Image" class="w-full sm:w-[50%] h-[40vh] object-cover rounded-lg mr-4 shadow-md">

                <div class="flex flex-col justify-between w-full p-2">
                    <div>
                        <h3 class="text-3xl font-bold text-[#5C3D2E] mb-2">Room @room.RoomNumber</h3>
                        <p class="text-lg text-[#7D5D4A]">
                            Category:
                            <span class="text-[#9C6F47] font-bold">@room.Category</span>
                        </p>
                        <p class="text-gray-600">
                            Status: <span class="font-medium">@room.Status</span>
                        </p>
                        <p class="text-2xl font-semibold text-[#4F772D] mt-2 text-right">₱@room.Price.ToString("N2")</p>
                    </div>
            
                    <a href="@Url.Action("Create", "Booking", new { roomId = room.RoomId, roomNumber = room.RoomNumber, roomImg = room.ImageUrl,
                        roomCategory = room.Category, roomPrice = room.Price
                                        })" class="mt-4 p-3 rounded-lg text-lg bg-[#9C6F47] hover:bg-[#7D5D4A] flex items-center justify-center text-white font-semibold self-center w-[75%] transition-transform transform hover:scale-105 hover:shadow-md">
                    BOOK NOW
                        <svg class="w-5 h-5 ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 4v16l12-8-12-8z"></path>
                        </svg>
                    </a>
            </div>
        </div>
                }
    </div>
</div>

<script>
    function filterRooms() {
        let floorFilter = document.getElementById("floorFilter").value;
        let categoryFilter = document.getElementById("categoryFilter").value;
        let rooms = document.querySelectorAll(".room-card");

        rooms.forEach(room => {
            let roomFloor = room.getAttribute("data-floor");
            let roomCategory = room.getAttribute("data-category");

            if ((floorFilter === "" || roomFloor === floorFilter) &&
                (categoryFilter === "" || roomCategory === categoryFilter)) {
                room.style.display = "flex";
            } else {
                room.style.display = "none";
            }
        });
    }
</script>
