@model IEnumerable<COLAFHotel.Models.Room>
@{
    ViewBag.Title = "Rooms";
}

<div class="max-w-6xl mx-auto p-6 bg-white rounded-lg shadow-md border border-[var(--fourth-color)]">
    <h2 class="text-[var(--primary-color)] text-3xl font-semibold mb-4">Rooms</h2>

    <!-- Filters -->
    <div class="flex flex-col sm:flex-row gap-4 mb-6">
        <!-- Floor Filter -->
        <div class="flex items-center bg-gray-800 text-white px-3 py-2 rounded-lg w-full sm:w-1/3">
            <svg class="w-5 h-5 text-gray-300 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16"></path>
            </svg>
            <select id="floorFilter" class="bg-gray-800 text-white w-full outline-none" onchange="filterRooms()">
                <option value="">All Floors</option>
                @foreach (var floor in Model.Select(r => r.RoomNumber.ToString().Substring(0, 1)).Distinct())
                {
                    <option value="@floor">Floor @floor</option>
                }
            </select>
        </div>

        <!-- Category Filter -->
        <div class="flex items-center bg-gray-800 text-white px-3 py-2 rounded-lg w-full sm:w-1/3">
            <svg class="w-5 h-5 text-gray-300 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m-4 4V4m8 4V4m-6 14h6a2 2 0 002-2v-6m-8 8h-6a2 2 0 01-2-2v-6"></path>
            </svg>
            <select id="categoryFilter" class="bg-gray-800 text-white w-full outline-none" onchange="filterRooms()">
                <option value="">All Categories</option>
                @foreach (var category in Model.Select(r => r.Category).Distinct())
                {
                    <option value="@category">@category</option>
                }
            </select>
        </div>
    </div>

    <!-- Room Cards -->
    <div id="room-container" class="grid grid-cols-1 md:grid-cols-2 gap-6">
        @foreach (var room in Model)
        {
            <div class="room-card bg-white shadow-lg rounded-lg border border-gray-200 p-4 flex flex-col sm:flex-row w-full"
                 data-floor="@room.RoomNumber.ToString().Substring(0, 1)"
                 data-category="@room.Category">
                <img src="@Url.Content(@room.ImageUrl)" alt="Room Image" class="w-full sm:w-[50%] h-[35vh] object-cover rounded-md mr-4">

                <div class="flex flex-col justify-between w-full p-2">
                    <div>
                        <h3 class="text-2xl font-bold text-[var(--primary-color)] mb-2">Room @room.RoomNumber</h3>
                        <p class="text-lg text-gray-700">
                            Category:
                            <span class="text-[var(--fourth-color)] font-bold">@room.Category</span>
                        </p>
                        <p class="text-gray-600">
                            Status: <span class="font-medium">@room.Status</span>
                        </p>
                        <p class="text-2xl font-semibold text-green-600 mt-2 text-right">₱@room.Price.ToString("N2")</p>
                    </div>
                    <a href="@Url.Action("Index", "Booking")" class="mt-4 p-2 rounded-lg text-sm bg-[var(--secondary-color)] hover:bg-[var(--fifth-color)] flex items-center justify-center text-lg text-white font-thin self-center w-[75%]">
                        BOOK NOW
                        <svg class="w-4 h-4 ml-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 4v16l12-8-12-8z"></path>
                        </svg>
                    </a>
                </div>
            </div>
        }
    </div>
</div>

<script>
    function filterRooms() {
        let floorFilter = document.getElementById("floorFilter").value;
        let categoryFilter = document.getElementById("categoryFilter").value;
        let rooms = document.querySelectorAll(".room-card");

        rooms.forEach(room => {
            let roomFloor = room.getAttribute("data-floor");
            let roomCategory = room.getAttribute("data-category");

            if ((floorFilter === "" || roomFloor === floorFilter) &&
                (categoryFilter === "" || roomCategory === categoryFilter)) {
                room.style.display = "flex";
            } else {
                room.style.display = "none";
            }
        });
    }
</script>
